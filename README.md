# XHS å¿ƒç†æµ‹è¯„ç®¡ç†åå°

**ç‰ˆæœ¬**: v1.0.0
**é¡¹ç›®**: xhs-evaluation-admin
**ç”¨é€”**: XHS å¿ƒç†æµ‹è¯„ç³»ç»Ÿçš„éªŒè¯ç ç®¡ç†åå°

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
4. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
5. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
6. [ä¸ç”¨æˆ·ç«¯é›†æˆ](#ä¸ç”¨æˆ·ç«¯é›†æˆ)
7. [APIæ–‡æ¡£](#apiæ–‡æ¡£)
8. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
9. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Next.js 14** å’Œ **Supabase** çš„éªŒè¯ç ç®¡ç†åå°ç³»ç»Ÿï¼Œä¸“é—¨ä¸º **xhs-evaluation** å¿ƒç†æµ‹è¯„ç”¨æˆ·ç«¯æä¾›éªŒè¯ç ç”Ÿå‘½å‘¨æœŸç®¡ç†æœåŠ¡ã€‚

### ä¸»è¦èŒè´£

- ğŸ” **éªŒè¯ç ç”Ÿæˆ**: æ”¯æŒéšæœºç”Ÿæˆå’Œè‡ªå®šä¹‰éªŒè¯ç 
- ğŸ“Š **ä½¿ç”¨ç›‘æ§**: å®æ—¶è¿½è¸ªéªŒè¯ç ä½¿ç”¨æƒ…å†µ
- ğŸ“ˆ **æ•°æ®ç»Ÿè®¡**: æä¾›å¯è§†åŒ–çš„è¿è¥æ•°æ®åˆ†æ
- ğŸ“¥ **Excelå¯¼å‡º**: æ‰¹é‡å¯¼å‡ºéªŒè¯ç ç”¨äºåˆ†å‘
- â° **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: ç®¡ç†éªŒè¯ç çš„æœ‰æ•ˆæœŸå’Œä½¿ç”¨æ¬¡æ•°

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 14.1.4** - React å…¨æ ˆæ¡†æ¶ï¼ˆApp Routerï¼‰
- **React 18.2.0** - UI åº“
- **TypeScript 5.4.2** - ç±»å‹å®‰å…¨
- **Tailwind CSS 3.4.1** - æ ·å¼æ–¹æ¡ˆ
- **React Query** - å¼‚æ­¥çŠ¶æ€ç®¡ç†

### åç«¯
- **Next.js API Routes** - æœåŠ¡ç«¯æ¥å£
- **Supabase** - PostgreSQL æ•°æ®åº“
- **bcryptjs** - å¯†ç å“ˆå¸Œ
- **ExcelJS** - Excel æ–‡ä»¶ç”Ÿæˆ

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è§„èŒƒ
- **Autoprefixer** - CSS å…¼å®¹æ€§
- **date-fns** - æ—¥æœŸå¤„ç†

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. è®¤è¯ç³»ç»Ÿ
- ç®¡ç†å‘˜ç™»å½•ï¼ˆé»˜è®¤è´¦å·è§ä¸‹æ–¹ï¼‰
- Session-based è®¤è¯
- 6å°æ—¶ä¼šè¯æœ‰æ•ˆæœŸ
- è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶

### 2. éªŒè¯ç ç®¡ç†
- **éšæœºç”Ÿæˆ**: æ‰¹é‡ç”Ÿæˆ12ä½éªŒè¯ç ï¼ˆæœ€å¤š1000ä¸ªï¼‰
- **è‡ªå®šä¹‰åˆ›å»º**: æ‰‹åŠ¨è¾“å…¥éªŒè¯ç ï¼ˆæœ€å°‘6ä½ï¼‰
- **ç¼–è¾‘æ›´æ–°**: ä¿®æ”¹æœ‰æ•ˆæœŸã€ä½¿ç”¨æ¬¡æ•°ã€å¤‡æ³¨
- **åˆ é™¤éªŒè¯ç **: æ”¯æŒå•ä¸ªåˆ é™¤
- **çŠ¶æ€ç­›é€‰**: æŒ‰æ´»è·ƒ/åœç”¨çŠ¶æ€è¿‡æ»¤
- **æœç´¢åŠŸèƒ½**: æŒ‰å¤‡æ³¨ä¿¡æ¯æœç´¢

### 3. ä»ªè¡¨ç›˜ç»Ÿè®¡
- éªŒè¯ç æ€»æ•°ç»Ÿè®¡
- æ´»è·ƒéªŒè¯ç æ•°é‡
- å³å°†è¿‡æœŸè­¦å‘Šï¼ˆ7å¤©å†…ï¼‰
- ä½¿ç”¨ç‡è®¡ç®—
- æœ€è¿‘7å¤©åˆ›å»ºè¶‹åŠ¿
- æœ€æ–°åˆ›å»ºè®°å½•

### 4. æ•°æ®å¯¼å‡º
- å¯¼å‡ºä¸º Excel æ ¼å¼
- æŒ‰æ‰¹æ¬¡å¯¼å‡º
- æŒ‰æ—¶é—´èŒƒå›´å¯¼å‡º
- æ ¸å¿ƒå­—æ®µ/å…¨éƒ¨å­—æ®µå¯é€‰
- è‡ªåŠ¨ç”Ÿæˆå¯¼å‡ºè¯´æ˜

---

## é¡¹ç›®ç»“æ„

```
xhs-evalution-admin/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/              # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â””â”€â”€ login/           # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ (protected)/         # éœ€è¦è®¤è¯çš„é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/       # ä»ªè¡¨ç›˜
â”‚   â”‚   â””â”€â”€ codes/           # éªŒè¯ç ç®¡ç†
â”‚   â”œâ”€â”€ actions/             # Server Actions
â”‚   â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ codes/           # éªŒè¯ç  CRUD API
â”‚   â”œâ”€â”€ globals.css          # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx           # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx             # é¦–é¡µï¼ˆé‡å®šå‘åˆ°dashboardï¼‰
â”‚
â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ auth/               # è®¤è¯ç»„ä»¶
â”‚   â””â”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”‚
â”œâ”€â”€ lib/                     # ä¸šåŠ¡é€»è¾‘åº“
â”‚   â”œâ”€â”€ auth/               # è®¤è¯é€»è¾‘
â”‚   â”‚   â””â”€â”€ session.ts      # Session ç®¡ç†
â”‚   â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ codes.ts        # éªŒè¯ç æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ dashboard.ts    # ä»ªè¡¨ç›˜æœåŠ¡
â”‚   â”‚   â””â”€â”€ export.ts       # å¯¼å‡ºæœåŠ¡
â”‚   â”œâ”€â”€ supabase/           # Supabase å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ codes.ts            # éªŒè¯ç å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ env.ts              # ç¯å¢ƒå˜é‡éªŒè¯
â”‚   â””â”€â”€ utils.ts            # é€šç”¨å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ database.ts         # æ•°æ®åº“ç±»å‹
â”‚   â”œâ”€â”€ codes.ts            # éªŒè¯ç ç±»å‹
â”‚   â””â”€â”€ dashboard.ts        # ä»ªè¡¨ç›˜ç±»å‹
â”‚
â”œâ”€â”€ supabaseSQL/            # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ verification_setup.sql      # è¡¨ç»“æ„å’Œç´¢å¼•
â”‚   â””â”€â”€ insert_demo_code.sql        # æµ‹è¯•æ•°æ®
â”‚
â”œâ”€â”€ middleware.ts           # Next.js ä¸­é—´ä»¶ï¼ˆè·¯ç”±ä¿æŠ¤ï¼‰
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd xhs-evalution-admin
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ç®¡ç†å‘˜ Session å¯†é’¥ï¼ˆå¯é€‰ï¼Œä¸è®¾ç½®ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼‰
ADMIN_SESSION_SECRET=your-secret-key
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š

```sql
-- 1. åˆ›å»ºè¡¨ç»“æ„
-- æ‰§è¡Œ supabaseSQL/verification_setup.sql

-- 2. æ’å…¥æµ‹è¯•éªŒè¯ç ï¼ˆå¯é€‰ï¼‰
-- æ‰§è¡Œ supabaseSQL/insert_demo_code.sql
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000)

### 5. ç™»å½•ç®¡ç†åå°

**é»˜è®¤ç®¡ç†å‘˜è´¦å·**:
- é‚®ç®±: `admin@xhs-evaluation.com`
- å¯†ç : `Admin@2024!`

> âš ï¸ **å®‰å…¨æç¤º**: è¯·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¿®æ”¹é»˜è®¤å¯†ç ï¼
> ä¿®æ”¹ä½ç½®: `lib/constants/auth.ts`

---

## ä¸ç”¨æˆ·ç«¯é›†æˆ

### é›†æˆæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xhs-evaluation-admin                        â”‚
â”‚                    (ç®¡ç†åå°)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“ åˆ›å»ºéªŒè¯ç 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Supabase Database                           â”‚
â”‚                  access_codes è¡¨                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“ éªŒè¯ & ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  xhs-evaluation                              â”‚
â”‚                    (ç”¨æˆ·ç«¯)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤1: ç¡®ä¿ä¸¤ç«¯ä½¿ç”¨ç›¸åŒçš„ Supabase é¡¹ç›®

**ç®¡ç†åå°** `.env.local`:
```bash
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...
```

**ç”¨æˆ·ç«¯** `.env.local`:
```bash
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGci...  # ç›¸åŒçš„å¯†é’¥
```

### æ­¥éª¤2: ç”¨æˆ·ç«¯å‡çº§éªŒè¯ç API

å°† `xhs-evaluation/app/api/verify-code/route.ts` æ›¿æ¢ä¸ºæ•°æ®åº“éªŒè¯ï¼š

```typescript
import { NextResponse } from 'next/server';
import { createClient } from '@supabase/supabase-js';

const VERIFICATION_WINDOW_MS = 72 * 60 * 60 * 1000; // 72å°æ—¶

export async function POST(request: Request) {
  try {
    const { code } = await request.json();

    // è¿æ¥æ•°æ®åº“
    const supabase = createClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.SUPABASE_SERVICE_ROLE_KEY!
    );

    // æŸ¥è¯¢éªŒè¯ç 
    const { data, error } = await supabase
      .from('access_codes')
      .select('*')
      .eq('plain_code', code.trim().toUpperCase())
      .single();

    if (error || !data) {
      return NextResponse.json({ error: 'éªŒè¯ç ä¸å­˜åœ¨' }, { status: 401 });
    }

    // æ£€æŸ¥è¿‡æœŸæ—¶é—´
    if (new Date(data.expires_at) < new Date()) {
      return NextResponse.json({ error: 'éªŒè¯ç å·²è¿‡æœŸ' }, { status: 401 });
    }

    // æ£€æŸ¥ä½¿ç”¨æ¬¡æ•°
    if (data.used_count >= data.max_uses) {
      return NextResponse.json({ error: 'éªŒè¯ç å·²è¾¾åˆ°ä½¿ç”¨ä¸Šé™' }, { status: 401 });
    }

    // æ›´æ–°ä½¿ç”¨æ¬¡æ•°ï¼ˆä¹è§‚é”ï¼‰
    const { error: updateError } = await supabase
      .from('access_codes')
      .update({ used_count: data.used_count + 1 })
      .eq('id', data.id)
      .eq('used_count', data.used_count);

    if (updateError) {
      return NextResponse.json({ error: 'éªŒè¯å¤±è´¥' }, { status: 500 });
    }

    // è¿”å›æœ‰æ•ˆæœŸ
    const verifiedUntil = Date.now() + VERIFICATION_WINDOW_MS;
    return NextResponse.json({ verifiedUntil });

  } catch (error) {
    console.error('Verification error:', error);
    return NextResponse.json({ error: 'æœåŠ¡å™¨é”™è¯¯' }, { status: 500 });
  }
}
```

### æ­¥éª¤3: å®‰è£… Supabase ä¾èµ–ï¼ˆç”¨æˆ·ç«¯ï¼‰

```bash
cd xhs-evaluation
npm install @supabase/supabase-js
```

### æ­¥éª¤4: æµ‹è¯•é›†æˆ

1. åœ¨**ç®¡ç†åå°**åˆ›å»ºæµ‹è¯•éªŒè¯ç ï¼š`TEST2024`
2. åœ¨**ç”¨æˆ·ç«¯**æµ‹è¯•éªŒè¯ç è¾“å…¥
3. æ£€æŸ¥**ç®¡ç†åå°**ä»ªè¡¨ç›˜ï¼Œç¡®è®¤ `used_count` å·²å¢åŠ 

---

## APIæ–‡æ¡£

### è®¤è¯

æ‰€æœ‰ API éœ€è¦ç®¡ç†å‘˜ Session Cookie: `xhs_admin_session`

### GET /api/codes

è·å–éªŒè¯ç åˆ—è¡¨

**Query Parameters**:
- `page` (number): é¡µç ï¼Œé»˜è®¤ 1
- `pageSize` (number): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20
- `search` (string): æŒ‰å¤‡æ³¨æœç´¢
- `status` ('all' | 'active' | 'inactive'): çŠ¶æ€ç­›é€‰
- `expiresFrom` (ISO 8601): è¿‡æœŸæ—¶é—´èµ·å§‹
- `expiresTo` (ISO 8601): è¿‡æœŸæ—¶é—´ç»“æŸ

**Response**:
```json
{
  "items": [
    {
      "id": "uuid",
      "displayCode": "ABC123DEF456",
      "status": "active",
      "expiresAt": "2025-01-01T00:00:00Z",
      "usage": "5/100",
      "description": "æµ‹è¯•éªŒè¯ç "
    }
  ],
  "total": 50
}
```

### POST /api/codes

åˆ›å»ºéªŒè¯ç 

**Request Body**:
```json
{
  "mode": "random",      // æˆ– "custom"
  "quantity": 10,        // mode=random æ—¶æœ‰æ•ˆ
  "plainCode": "TEST",   // mode=custom æ—¶å¿…å¡«
  "expiresAt": "2025-01-01T00:00:00Z",
  "maxUses": 100,
  "description": "å¤‡æ³¨ä¿¡æ¯"
}
```

**Response**:
```json
{
  "ids": ["uuid1", "uuid2"],
  "plainCodes": ["ABC123", "DEF456"],
  "batchCreatedAt": "2024-12-02T10:00:00Z"
}
```

### PUT /api/codes/[id]

æ›´æ–°éªŒè¯ç 

**Request Body**:
```json
{
  "expires_at": "2025-02-01T00:00:00Z",
  "max_uses": 200,
  "description": "æ–°å¤‡æ³¨"
}
```

### DELETE /api/codes/[id]

åˆ é™¤éªŒè¯ç 

**Response**:
```json
{
  "success": true
}
```

### GET /api/codes/batches

è·å–æœ€è¿‘æ‰¹æ¬¡åˆ—è¡¨

**Response**:
```json
[
  {
    "createdAt": "2024-12-02T10:00:00Z",
    "count": 50
  }
]
```

### POST /api/codes/export

å¯¼å‡ºéªŒè¯ç  Excel

**Request Body**:
```json
{
  "content": "all",        // æˆ– "summary"
  "scope": "batch",        // æˆ– "range"
  "batchKey": "2024-12-02T10:00:00Z",  // scope=batch æ—¶å¿…å¡«
  "rangeStart": "2024-12-01T00:00:00Z", // scope=range æ—¶å¯é€‰
  "rangeEnd": "2024-12-31T23:59:59Z"    // scope=range æ—¶å¯é€‰
}
```

**Response**: Excel æ–‡ä»¶æµ

---

## æ•°æ®åº“è®¾è®¡

### access_codes è¡¨

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `id` | uuid | ä¸»é”® |
| `code_hash` | text | bcrypt å“ˆå¸Œå€¼ |
| `plain_code` | text | æ˜æ–‡éªŒè¯ç ï¼ˆç”¨äºç®¡ç†ï¼‰ |
| `expires_at` | timestamptz | è¿‡æœŸæ—¶é—´ |
| `max_uses` | int | æœ€å¤§ä½¿ç”¨æ¬¡æ•° |
| `used_count` | int | å·²ä½¿ç”¨æ¬¡æ•° |
| `description` | text | å¤‡æ³¨ä¿¡æ¯ |
| `created_at` | timestamptz | åˆ›å»ºæ—¶é—´ |

### ç´¢å¼•

- `idx_access_codes_expires_at`: æŒ‰è¿‡æœŸæ—¶é—´æŸ¥è¯¢
- `idx_access_codes_usage`: æŒ‰ä½¿ç”¨æƒ…å†µæŸ¥è¯¢
- `idx_access_codes_plain_code`: å”¯ä¸€æ˜æ–‡éªŒè¯ç ï¼ˆæ’é™¤NULLï¼‰

### RLS ç­–ç•¥

æ‰€æœ‰ç›´æ¥æ•°æ®åº“è®¿é—®è¢«é˜»æ–­ï¼Œä»…å…è®¸ Service Role Key æ“ä½œ

---

## éƒ¨ç½²æŒ‡å—

### Vercel éƒ¨ç½²

1. æ¨é€ä»£ç åˆ° GitHub
2. åœ¨ Vercel å¯¼å…¥é¡¹ç›®
3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `ADMIN_SESSION_SECRET`
4. ç‚¹å‡» Deploy

### è‡ªæ‰˜ç®¡éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®æ”¹ç®¡ç†å‘˜è´¦å·ï¼Ÿ

**A**: ç¼–è¾‘ `lib/constants/auth.ts`:

```typescript
export const DEFAULT_ADMIN_EMAIL = 'ä½ çš„é‚®ç®±';
export const DEFAULT_ADMIN_PASSWORD = 'ä½ çš„å¯†ç ';
```

### Q2: éªŒè¯ç æœ€é•¿å¤šå°‘ä½ï¼Ÿ

**A**: éšæœºç”Ÿæˆé»˜è®¤12ä½ï¼Œè‡ªå®šä¹‰æœ€å°‘6ä½ï¼Œæ— ä¸Šé™

### Q3: å¦‚ä½•è®¾ç½®æ— é™ä½¿ç”¨æ¬¡æ•°ï¼Ÿ

**A**: åœ¨åˆ›å»ºæ—¶è®¾ç½® `maxUses` ä¸º 999999 æˆ–æ›´å¤§

### Q4: ç”¨æˆ·ç«¯éªŒè¯å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥ï¼š
1. ä¸¤ç«¯æ˜¯å¦ä½¿ç”¨ç›¸åŒçš„ Supabase é¡¹ç›®
2. éªŒè¯ç æ˜¯å¦å­˜åœ¨ä¸”æœªè¿‡æœŸ
3. éªŒè¯ç æ˜¯å¦è¿˜æœ‰å¯ç”¨æ¬¡æ•°
4. ç”¨æˆ·ç«¯æ˜¯å¦æ­£ç¡®è½¬æ¢å¤§å†™ï¼ˆ`code.toUpperCase()`ï¼‰

### Q5: å¦‚ä½•å¤‡ä»½éªŒè¯ç æ•°æ®ï¼Ÿ

**A**: ä½¿ç”¨å¯¼å‡ºåŠŸèƒ½ï¼Œæˆ–åœ¨ Supabase Dashboard å¯¼å‡º SQL

---

## å¼€å‘æ³¨æ„äº‹é¡¹

### ä»£ç ä¼˜åŒ–

1. **ä½¿ç”¨äº†ä¹è§‚é”**: æ›´æ–° `used_count` æ—¶æ£€æŸ¥å½“å‰å€¼ï¼Œé˜²æ­¢å¹¶å‘é—®é¢˜
2. **bcrypt å“ˆå¸Œ**: éªŒè¯ç å­˜å‚¨ä½¿ç”¨ bcryptï¼ˆè™½ç„¶ç”¨æˆ·ç«¯ç›´æ¥æ¯”å¯¹æ˜æ–‡ï¼‰
3. **ç´¢å¼•ä¼˜åŒ–**: æŒ‰æŸ¥è¯¢åœºæ™¯åˆ›å»ºäº†åˆé€‚çš„ç´¢å¼•
4. **åˆ†é¡µæŸ¥è¯¢**: é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

### å®‰å…¨å»ºè®®

1. ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
2. ä½¿ç”¨å¼º Session Secret
3. å®šæœŸæ¸…ç†è¿‡æœŸéªŒè¯ç 
4. ç›‘æ§å¼‚å¸¸ä½¿ç”¨è¡Œä¸º
5. å¯ç”¨ HTTPS

---

## è®¸å¯è¯

MIT License

---

## ä½œè€…

Claude Code - åŸºäº"å¿ƒç†æµ‹è¯•é›†åˆç½‘ç«™1.0åå°"æ¶æ„ä»¿å†™

**ç‰ˆæœ¬**: v1.0.0
**æ›´æ–°æ—¥æœŸ**: 2024-12-02
